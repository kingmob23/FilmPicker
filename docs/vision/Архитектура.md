### Архитектурное решение для MVP веб-приложения "FilmPicker"

#### 1. Введение
Документ описывает архитектурное решение для MVP веб-приложения "FilmPicker", разработанного для помощи группам пользователей в выборе фильмов для совместного просмотра. Архитектура приложения разделена на четыре основных модуля: базу данных, бэкенд, парсер и фронтенд.

#### 2. Общая архитектура
Приложение "FilmPicker" строится на современной архитектуре, оптимизированной для гибкости, масштабируемости и удобства разработки и поддержки. В основе архитектуры лежат следующие принципы:

- **Модульность**: Архитектура приложения разделена на четыре основных модуля: база данных, бэкенд, парсер и фронтенд. Каждый модуль отвечает за свою уникальную функцию и может разрабатываться, тестироваться и обновляться независимо от остальных.

- **API-центричность**: Бэкенд разработан с использованием FastAPI, что подчеркивает API-first подход в архитектуре приложения. Это подразумевает и обеспечивает: единый интерфейс, независимость разработки компонентов, доступность всех функций через четко определенные, хорошо документированные эндпоинты. Это упрощает интеграцию фронтенда и возможные сторонние интеграции в будущем. Способствует более легкому масштабированию и тестированию приложения; созданию более надежной и безопасной системы за счет четкой разграниченности ответственности между компонентами.

- **Масштабируемость**: Архитектура приложения изначально закладывает масштабируемость. Использование SQLite для MVP предоставляет необходимую функциональность и скорость разработки на ранних этапах. Возможность перехода на более мощную СУБД заложена за счет использования ORM (SQLAlchemy), что позволяет абстрагироваться от конкретной СУБД.

#### 3. Технологический стек
- Фронтенд: React, TypeScript, CSS-in-JS
- Бэкенд: FastAPI, SQLite
- Парсер: Scrapy
- База данных: SQLite (MVP)

#### 4. Модули приложения
##### 4.1 База данных
- **Технология**: SQLite.
- **Описание**: База данных используется для хранения списков фильмов пользователей.
- **Функции**: Хранение watchlist'ов пользователей.

##### 4.2 Бэкенд
###### 4.2.1 API
- **Технология**: FastAPI
- **Описание**: FastAPI служит в качестве веб-фреймворка для приема и обработки HTTP-запросов, обеспечивая связь между клиентским интерфейсом и серверной логикой.
- **Функции**: Маршрутизация запросов, валидация данных.

##### 4.2.2 Business Logic
- **Технология**: Python
- **Описание**: Сердце приложения, содержит всю логику обработки данных, исходя из бизнес-правил и алгоритмов, определяющих поведение приложения.
- **Функции**: Выполнение операций поиска пересечений, обработка данных от парсера, подготовка данных для сохранения или обновления в базе данных.

##### 4.2.3 ORM
- **Технология**: SQLAlchemy
- **Описание**: SQLAlchemy предоставляет инструменты для взаимодействия с базой данных через объектно-ориентированный подход, скрывая сложности SQL-запросов.
- **Функции**: Определение схем данных, выполнение CRUD-операций, управление миграциями.

##### 4.2.4 Парсер
- **Технология**: Scrapy
- **Описание**: Scrapy используется для автоматизированного сбора данных с внешних ресурсов, специально настроен для работы с сайтом Letterboxd.
- **Функции**: Извлечение данных, их предварительная обработка и передача в бэкенд для дальнейшего использования.

##### 4.3 Фронтенд
- **Технология**: React, TypeScript, CSS-in-JS
- **Описание**: Фронтенд разработан для обеспечения интерактивного пользовательского интерфейса с использованием современных веб-технологий.
- **Функции**: Отображение интерфейса пользователя, отправка запросов на бэкенд, отображение результатов поиска, управление пользовательскими сессиями.

#### 5. Взаимодействие между модулями
Для обеспечения четкой и безопасной работы всех компонентов системы, взаимодействие между модулями организовано через четко определенные API:

- **Фронтенд и Бэкенд**: Фронтенд взаимодействует с бэкендом через RESTful API, что позволяет передавать данные между пользовательским интерфейсом и сервером в структурированном и безопасном формате. Это взаимодействие включает запросы на получение, создание и обработку данных, таких как списки фильмов и результаты их пересечений.

- **Бэкенд и База данных**: Бэкенд использует ORM (SQLAlchemy) для взаимодействия с базой данных. Это обеспечивает абстракцию и унификацию доступа к данным, позволяя легко вносить изменения в структуру базы данных или переходить на другую СУБД без влияния на бизнес-логику приложения. ORM также помогает в оптимизации запросов и обеспечивает дополнительный уровень безопасности за счет предотвращения SQL-инъекций.

- **Бэкенд и Парсер**: Парсер передает собранные данные в бэкенд через API, разработанный специально для этого взаимодействия. Этот API служит защищенным каналом для передачи данных о фильмах, полученных с сайта Letterboxd. Использование API гарантирует, что данные можно валидировать и обрабатывать согласно бизнес-логике приложения до их сохранения в базе данных.